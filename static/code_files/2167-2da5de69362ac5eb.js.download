"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2167],{3111:(e,t,n)=>{n.d(t,{d:()=>o});let o=e=>{let{pathname:t,searchParams:n,queryString:o,shouldOpenInClaudeApp:r}=e,a="".concat(t,"?").concat(o),s=n.get("origin");if(s)a=s;else if(r){let e=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,n=t.startsWith("/project/")&&e.test(t.slice(9)),r=t.startsWith("/chat/")&&e.test(t.slice(6)),s=t.startsWith("/code"),c=n||r||s||"/new"===t?t:"/new";a="claude://claude.ai".concat(c,"?").concat(o)}return a}},12142:(e,t,n)=>{n.d(t,{Q:()=>i});var o=n(74813),r=n(64328),a=n(28044),s=n(27541),c=n(3111);let i=function(){let{pathname:e,queryString:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,r.YL)(),i=(0,s.usePathname)(),l=(0,s.useSearchParams)(),u=(0,a.V)(),{track:m}=(0,o.st)(),d="".concat((0,c.d)({pathname:e||i,searchParams:l,queryString:t,shouldOpenInClaudeApp:u}));return e=>{let{uuid:t,url:o}=e;m({event_key:"claudeai.mcp.auth.init",uuid:t,url:o}),window.location.href="/api/organizations/".concat(null==n?void 0:n.uuid,"/mcp/start-auth/").concat(t,"?redirect_url=").concat(encodeURIComponent(d),"&open_in_browser=1")}}},17819:(e,t,n)=>{n.d(t,{O:()=>a});var o=n(54568),r=n(72902);let a=e=>{let{size:t=20,borderRadius:n=.27*t,className:a,children:s}=e;return(0,o.jsx)("div",{style:{width:t,height:t,borderRadius:n},className:(0,r.A)("shrink-0 bg-bg-000 border-border-300 border-0.5 shadow-sm flex items-center justify-center",a),children:s})}},22167:(e,t,n)=>{n.d(t,{Cg:()=>D,Dd:()=>w,FZ:()=>T,LN:()=>b,TI:()=>E,X0:()=>N,XE:()=>I,Ys:()=>z,dJ:()=>G,eL:()=>P,fe:()=>Q,kO:()=>j,ob:()=>M,ph:()=>R,qi:()=>x,tS:()=>C,vm:()=>O,xc:()=>L,z3:()=>k});var o=n(94295),r=n(1613),a=n(64328),s=n(35984),c=n(16178),i=n(80688),l=n(68067),u=n(2e3),m=n(28044),d=n(66365),g=n(4869),p=n(27541),f=n(7620),v=n(10369),h=n(3111),y=n(12142),_=n(35580),S=n(40459);let C=e=>e.type===u.v8.GITHUB?{sync_source_type:u.v8.GITHUB,sync_source_config:e.config}:e.type===u.v8.GDRIVE?{sync_source_type:u.v8.GDRIVE,sync_source_config:e.config}:null,b=()=>{let{activeOrganization:e}=(0,a.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/sync/settings"),{queryKey:[i._V,{orgUuid:t}],enabled:!!e})},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,a.YL)(),n=null==t?void 0:t.uuid,o=(0,g.useQueryClient)();return(0,r.Qv)("/api/organizations/".concat(n,"/sync/settings"),"PUT",(e,t)=>{let{type:n,enabled:o}=e;t||(t=[]);let r=t.map(e=>e.type===n?{...e,enabled:o}:e);return r.some(e=>e.type===n)?r:[...t,{type:n,enabled:o}]},{queryKey:[i._V,{orgUuid:n}],enabled:!!t,onSuccess:async function(){for(var t,r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];await o.invalidateQueries({queryKey:[i._V,{orgUuid:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...a))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,a.YL)(),n=null==t?void 0:t.uuid,o=(0,g.useQueryClient)(),s=(0,l.fS)("kingfisher_enabled"),c=(0,l.fS)("apps_use_bananagrams"),u=(0,d.useLayer)("trials_freemium").get("free_integrations",!1);return(0,r.Qv)("/api/organizations/".concat(n,"/sync/settings/config"),"POST",(e,t)=>{let{type:n,config:o}=e;return t||(t=[]),t.map(e=>e.type===n?{...e,config:{...e.config,...o}}:e)},{queryKey:[i._V,{orgUuid:n}],enabled:!!(t&&(s||u)&&c),onSuccess:async function(){for(var t,r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];await o.invalidateQueries({queryKey:[i._V,{orgUuid:n}]}),await (null==(t=e.onSuccess)?void 0:t.call(e,...a))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},T=e=>{let{callerIdentifier:t,successParam:n,handleOpen:o}=e,r=(0,p.useSearchParams)(),a=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!r.has(n)||a.current||t&&t!==r.get(n)||(a.current=!0,((e,t)=>{let n=new URLSearchParams(Array.from(t.entries()));n.delete(e);let o=n.toString()?"?".concat(n.toString()):"",r=window.location.pathname+o;window.history.replaceState({...window.history.state,as:r,url:r},"",r)})(n,r),o())},[r,t,o,n])},k=e=>{let t;return t=e.status.state,[u.I5.CREATED,u.I5.PENDING,u.I5.UPDATING].includes(t)},w=e=>[u.I5.FAILED,u.I5.UPDATE_FAILED].includes(e.status.state),P=()=>{let{addError:e}=(0,s.Y)(),t=(0,g.useQueryClient)();return(n,o)=>{(e=>{if(e instanceof c.LG)return e instanceof c.LG&&"access_denied"===e.errorCode})(n)&&(e("Please try again. You may need to reconnect with your ".concat(u.sb[o.sync_source_type]," account."),{error:n}),i.ku.forEach(e=>{t.invalidateQueries({queryKey:[e]})}),t.invalidateQueries({queryKey:[i.GC]}))}},A={[u.v8.GCAL]:"enabled_foccacia",[u.v8.GMAIL]:"enabled_sourdough"},I=e=>{let t="cinnabon_enabled";switch(e){case u.v8.GCAL:case u.v8.GMAIL:t="pumpernickel_enabled";break;case u.v8.GDRIVE:t="kingfisher_enabled";break;default:t="cinnabon_enabled"}let n=(0,l.fS)(t),o=(0,d.useLayer)("trials_freemium").get("free_integrations",!1),r=n||(e===u.v8.GCAL||e===u.v8.GMAIL||e===u.v8.GDRIVE)&&o;return!S.env.NEXT_PUBLIC_DISABLE_INTEGRATIONS&&r},E={"https://mcp-server-gcal-586545259222.us-central1.run.app/sse":u.v8.GCAL,"https://mcp-server-gcal-586545259222.us-central1.run.app/mcp":u.v8.GCAL,"https://gcal.mcp.claude.com/mcp":u.v8.GCAL,"https://gcal.mcp.staging.ant.dev/mcp":u.v8.GCAL,"https://mcp-server-gmail-110131437935.us-central1.run.app/sse":u.v8.GMAIL,"https://mcp-server-gmail-110131437935.us-central1.run.app/mcp":u.v8.GMAIL,"https://gmail.mcp.claude.com/mcp":u.v8.GMAIL,"https://gmail.mcp.staging.ant.dev/mcp":u.v8.GMAIL,"https://api.anthropic.com/mcp/gdrive/sse":u.v8.GDRIVE,"https://api.anthropic.com/mcp/gdrive/mcp":u.v8.GDRIVE},x=e=>{let t;return t=(0,_.Uz)({type:"remote"}),t.find(t=>t.url&&E[t.url]===e)},G=e=>!!x(e),O=()=>(0,l.fS)("enabled_brioche"),j=()=>(0,l.fS)("mcp_gdrive"),z=e=>{let t=O(),n=j(),o=(e=>{let t=(0,a.mV)(),{data:n}=b(),o=!!(Array.isArray(n)&&n.find(t=>t.type===e&&t.enabled));return!t||o})(e),r=I(e),s=G(e),c=e===u.v8.GDRIVE?n:t;return!!(r&&(o||c&&s))},K=e=>"sfdc"===e?"salesforce":"gdrive"===e?"mcp/drive":e,D=e=>{let t=x(e);return t?{isFetched:!0,isAuthenticated:!!t.isConnected,server_uuid:t.uuid}:{isFetched:!1,isAuthenticated:!1,server_uuid:void 0}},M=function(e){let{callerIdentifier:t,handleAuthSuccess:n,pathname:o,queryString:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=j(),l=O(),d=e===u.v8.GDRIVE?i:l,_=((e,t)=>{let{pathname:n,queryString:o,callerIdentifier:r}=t,a=x(e),s=z(e),c=D(e),i=r?"".concat(e,"_success=").concat(r).concat(o?"&".concat(o):""):o,l=(0,y.Q)({pathname:n,queryString:i});return{isAuthenticated:!!s&&!!a&&c.isAuthenticated,startAuth:()=>{s&&a&&l({uuid:a.uuid,url:a.url})},disconnect:()=>{},isFetched:!!a&&c.isFetched}})(e,{pathname:o,queryString:c,callerIdentifier:t}),{activeOrganization:S}=(0,a.YL)(),C=null==S?void 0:S.uuid,b=(0,p.usePathname)(),L=(0,p.useSearchParams)(),{addSuccess:R}=(0,s.Y)(),k=(0,v.A)(),w=z(e),P=(0,g.useQueryClient)(),A=(0,m.V)(),{data:I,isFetched:E}=(0,r.Sk)("/api/organizations/".concat(C,"/sync/").concat(K(e),"/auth"),{queryKey:["sync_".concat(e,"_auth_status"),{orgUuid:C}],enabled:!!(S&&w)}),G=(0,f.useRef)(!1),{mutate:M}=(0,r.L2)("/api/organizations/".concat(C,"/sync/").concat(K(e),"/auth/start"),"POST",{enabled:!!(S&&w)&&!d,onSuccess:e=>{window.location.href=e.redirect_url}});T({callerIdentifier:t,successParam:"".concat(e,"_success"),handleOpen:()=>{R(k.formatMessage({defaultMessage:"Successfully connected to {integrationName}",id:"T7cL93l/KQ"},{integrationName:u.sb[e]})),null==n||n(!0)}});let{mutate:N}=(0,r.L2)("/api/organizations/".concat(C,"/sync/").concat(K(e),"/auth"),"DELETE",{enabled:!!(S&&w)&&!d,onSuccess:()=>{P.invalidateQueries({queryKey:["sync_".concat(e,"_auth_status"),{orgUuid:C}]})}});return d&&_.isFetched?{..._,authBreakdown:{mcp:w&&_.isAuthenticated,firstParty:w&&!!(null==I?void 0:I.is_authenticated)},mcpServerGated:d}:{isAuthenticated:w&&!!(null==I?void 0:I.is_authenticated),startAuth:()=>{if(!G.current&&w){let n="".concat(e,"_success=").concat(t).concat(c?"&".concat(c):""),r=(0,h.d)({pathname:o||b,searchParams:L,queryString:n,shouldOpenInClaudeApp:A});if(A){window.location.href="/settings/connectors?open_in_browser=1&auth_start=".concat(e,"&origin=").concat(r);return}G.current=!0,M({pre_auth_state:{origin:r},redirect_uri:new URL("/connect/".concat(K(e),"/callback"),window.location.origin).toString()})}},disconnect:N,isFetched:E,authBreakdown:{mcp:w&&_.isAuthenticated,firstParty:w&&!!(null==I?void 0:I.is_authenticated)},mcpServerGated:d}},N=(e,t)=>{var n,o;let r=O(),s=j(),c=e===u.v8.GDRIVE?s:r,i=z(e),{account:l}=(0,a.YL)(),m=A[e];return!m||c?i:i&&(t?!!(null==t||null==(n=t.conversationSettings)?void 0:n[m]):!!(null==l||null==(o=l.settings)?void 0:o[m]))},Q=()=>{let{account:e}=(0,a.YL)(),{mutate:t}=(0,o.yJ)();return{toggleIntegrationEnabled:(n,o)=>{if(!e)return;let r=A[n];r&&t({[r]:o})}}}},35580:(e,t,n)=>{n.d(t,{rD:()=>k,nd:()=>L,s$:()=>R,eZ:()=>S,Ug:()=>A,pK:()=>W,KU:()=>H,_b:()=>X,dY:()=>z,et:()=>C,xk:()=>b,pH:()=>P,H:()=>M,eg:()=>I,jh:()=>K,yt:()=>N,kU:()=>D,BG:()=>F,zC:()=>U,fR:()=>V,kc:()=>E,pZ:()=>x,k$:()=>O,aF:()=>j,n3:()=>w,MR:()=>G,HG:()=>T,qT:()=>J,Ak:()=>Z,Uz:()=>B,Q1:()=>Y});var o=n(23525),r=n(7620),a=n(4211),s=n(50848),c=n(42469),i=n(86284),l=n(76426),u=n(92693),m=n(56929),d=n(56203),g=n.n(d),p=n(24407);let f=e=>e.replace(/_/g," ").replace(/^\w/,e=>e.toUpperCase());async function v(e,t,n){try{return(await t.listTools({},{timeout:5e3})).tools.map(e=>n?(0,u.M)(e):e).map(t=>{var n,o,r;return{...t,displayName:f(t.title||(null==(n=t.annotations)?void 0:n.title)||t.name),enabledKey:(o=e,r=t.name,"".concat(o,":").concat(r)),alwaysApprovedKey:""}}).map(e=>({...e,alwaysApprovedKey:function(e){let t=e.enabledKey,n=e.description||"",o=function(e){var t;let n=Object.entries((null==(t=e.inputSchema)?void 0:t.properties)||{}),o=[];for(let[e,t]of n){let{data:n}=_.safeParse(t),r=(null==n?void 0:n.description)||"";o.push([e,r])}return o.sort((e,t)=>e[0].localeCompare(t[0])).flat().join(",")}(e),r=g().createHash("md5").update("".concat(n,":").concat(o)).digest("hex");return"".concat(t,"-").concat(r)}(e)}))}catch(t){return(0,m.Cp)(t,{tags:{action:"listTools",serverUuid:e}}),[]}}async function h(e,t){try{return(await t.listPrompts({},{timeout:5e3})).prompts.map(e=>({...e,displayName:f(e.title||e.name)}))}catch(t){return(0,m.Cp)(t,{tags:{action:"listPrompts",serverUuid:e}}),[]}}async function y(e,t){try{return(await t.listResources({},{timeout:5e3})).resources.map(e=>({...e,displayName:f(e.title||e.name)}))}catch(t){return(0,m.Cp)(t,{tags:{action:"listResources",serverUuid:e}}),[]}}let _=p.z.object({description:p.z.string().optional(),type:p.z.string().optional(),title:p.z.string().optional()}).optional(),S=(0,a.v)()((0,s.eh)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...(e=>({localClients:{},localTools:{},localPrompts:{},localResources:{},dxts:{},localIsLoading:!1,setLocalClient:(t,n,o)=>e(e=>({localClients:{...e.localClients,[t]:{uuid:null!=o?o:t,client:n}}})),removeLocalServer:t=>e(e=>{let{[t]:n,...o}=e.localClients,{[t]:r,...a}=e.localTools,{[t]:s,...c}=e.localPrompts,{[t]:i,...l}=e.localResources,{[t]:u,...m}=e.dxts;return{localClients:o,localTools:a,localPrompts:c,localResources:l,dxts:m}}),setLocalTools:(t,n)=>e(e=>({localTools:{...e.localTools,[t]:n}})),setLocalPrompts:(t,n)=>e(e=>({localPrompts:{...e.localPrompts,[t]:n}})),setLocalResources:(t,n)=>e(e=>({localResources:{...e.localResources,[t]:n}})),setDxt:(t,n)=>e(e=>({dxts:{...e.dxts,[t]:n}})),setLocalIsLoading:t=>e({localIsLoading:t})}))(...t),...(0,l.Ds)(...t)}})),C=e=>S.getState().remoteServers[e],b=async e=>S.getState().remoteClients[(0,l.Ic)(e)],L=e=>void 0===S.getState().remoteServers[e],R=e=>void 0===S.getState().remoteConnectionStates[e],T=(e,t)=>{let n=S.getState();return!t||(0,l.Ic)(e)in n.remoteClients},k=e=>S.getState().addRemoteServer(e),w=(e,t)=>S.getState().setRemoteServerConnected(e,t),P=e=>{var t;return(null==(t=S.getState().remoteConnectionStates[e])?void 0:t.isConnected)===!0},A=e=>S.getState().disconnectRemoteServer(e),I=e=>S.getState().removeRemoteServer(e),E=(e,t)=>S.getState().setRemoteClient(e,t),x=e=>S.getState().setRemoteIsLoading(e),G=async(e,t,n)=>{let o=await v(e,t,n);return S.getState().setRemoteTools(e,o),o},O=async(e,t)=>{let n=await h(e,t);return S.getState().setRemotePrompts(e,n),n},j=async(e,t)=>{let n=await y(e,t);return S.getState().setRemoteResources(e,n),n},z=e=>{for(let[,{uuid:t,client:n}]of Object.entries(S.getState().localClients))if(t===e)return n},K=(e,t,n)=>S.getState().setLocalClient(e,t,n),D=e=>S.getState().setLocalIsLoading(e),M=e=>S.getState().removeLocalServer(e),N=(e,t)=>S.getState().setDxt(e,t),Q=e=>"local:".concat(e),V=async(e,t,n)=>{let o=await v(Q(e),t,n);return S.getState().setLocalTools(e,o),o},F=async(e,t)=>{let n=await h(Q(e),t);return S.getState().setLocalPrompts(e,n),n},U=async(e,t)=>{let n=await y(Q(e),t);return S.getState().setLocalResources(e,n),n};function q(e,t){for(let[c,i]of Object.entries(t)){var n,o,r,a,s;if(void 0!==i){if("hasTools"===c){if(((null==(n=e.tools)?void 0:n.length)||0)>0!==i)return!1}else if("hasPrompts"===c){if(((null==(o=e.prompts)?void 0:o.length)||0)>0!==i)return!1}else if("hasResources"===c){if(((null==(r=e.resources)?void 0:r.length)||0)>0!==i)return!1}else if("hasPromptsOrResources"===c){let t=((null==(a=e.prompts)?void 0:a.length)||0)>0,n=((null==(s=e.resources)?void 0:s.length)||0)>0;if((t||n)!==i)return!1}else if(e[c]!==i)return!1}}return!0}let B=e=>{let t=S((0,c.k)(e=>({remoteServers:e.remoteServers,remoteConnectionStates:e.remoteConnectionStates,remoteTools:e.remoteTools,remotePrompts:e.remotePrompts,remoteResources:e.remoteResources,localClients:e.localClients,localTools:e.localTools,localPrompts:e.localPrompts,localResources:e.localResources,dxts:e.dxts})));return(0,r.useMemo)(()=>{var n,o,r,a,s,c;let l=[];for(let[a,s]of Object.entries(t.remoteServers)){if(!s)continue;let c={...s,uuid:a,type:"remote",iconType:"favicon",iconSrc:s.url,...t.remoteConnectionStates[a],tools:null!=(n=t.remoteTools[a])?n:[],prompts:null!=(o=t.remotePrompts[a])?o:[],resources:null!=(r=t.remoteResources[a])?r:[],version:void 0};(!e||q(c,e))&&l.push(c)}l.sort((e,t)=>e.name.localeCompare(t.name));let u=[];for(let[n,o]of Object.entries(t.localClients)){if(!o)continue;let r=t.dxts[n],l={name:n,uuid:o.uuid,type:"local",iconType:"external",iconSrc:(null==r?void 0:r.manifest.icon)?(0,i.C)(r.manifest.icon,r.path):void 0,isConnected:!0,isConnecting:!1,usedAuthentication:!1,tools:null!=(a=t.localTools[n])?a:[],prompts:null!=(s=t.localPrompts[n])?s:[],resources:null!=(c=t.localResources[n])?c:[]};(!e||q(l,e))&&u.push(l)}return u.sort((e,t)=>e.name.localeCompare(t.name)),[...l,...u]},[t,e])},Y=()=>S(e=>e.remoteIsLoading||e.localIsLoading),Z=()=>{let e=S(e=>e.remoteClients),t=S(e=>e.localClients);return(0,r.useMemo)(()=>[...Object.values(e).filter(e=>e instanceof o.K),...Object.values(t).map(e=>e.client)],[e,t])},H=e=>{let t=z(e)||S.getState().remoteClients[e];if(!t)throw Error("Client not found for connector ".concat(e));if(t instanceof Promise)throw Error("Client for connector ".concat(e," is still connecting"));return t},W=e=>{let t=S.getState();for(let[r,a]of Object.entries(t.remoteServers)){var n,o;let s=null!=(o=null==(n=t.remoteTools[r])?void 0:n.find(t=>"".concat(a.name,":").concat(t.name)===e))?o:void 0;if(s)return{tool:s,server:{uuid:r,name:a.name,url:a.url,type:"remote",iconType:"favicon",iconSrc:a.url}}}for(let[n,o]of Object.entries(t.localTools)){let r=o.find(t=>"".concat(n,":").concat(t.name)===e),a=t.localClients[n],s=t.dxts[n],c=(null==s?void 0:s.manifest.icon)?(0,i.C)(s.manifest.icon,s.path):void 0;if(r&&a)return{tool:r,server:{uuid:a.uuid,name:n,type:"local",iconType:"external",iconSrc:c}}}},J=e=>Object.values(S.getState().remoteTools).flat().find(t=>t.name===e)||Object.values(S.getState().localTools).flat().find(t=>t.name===e),X=(e,t)=>{let n=S.getState(),o=[];for(let[r,a]of Object.entries(n.remoteTools)){let s=n.remoteServers[r];T(r,e)&&s&&a.filter(e=>(null==t?void 0:t[e.enabledKey])!==!1).forEach(e=>{var t;o.push({name:e.name,description:null!=(t=e.description)?t:e.name,input_schema:e.inputSchema,integration_name:s.name,mcp_server_uuid:s.uuid})})}for(let[e,r]of Object.entries(n.localTools))r.filter(e=>(null==t?void 0:t[e.enabledKey])!==!1).forEach(t=>{var n;o.push({name:t.name,description:null!=(n=t.description)?n:t.name,input_schema:t.inputSchema,integration_name:e})});return o}},45271:(e,t,n)=>{n.d(t,{z:()=>u});var o=n(54568),r=n(17819),a=n(82028),s=n(71700),c=n(9398),i=n(14692),l=n(72902);let u=e=>{let{size:t,imageSize:n,name:u="",className:m,fallbackToGlobe:d,type:g,src:p}=e,f=!n,v=null!=n?n:t,h=d?void 0:(0,o.jsx)(a.B,{letter:u,size:v,hideBorder:!f}),y=e=>(0,o.jsx)(r.O,{size:t,className:(0,l.A)(m,f&&"!border-0 !shadow-none !bg-transparent"),children:e});switch(g){case"favicon":return y((0,o.jsx)(s.d,{fadeInOnLoad:!0,url:p,size:v,fallbackSvg:h}));case"external":return y((0,o.jsx)(i.u,{style:{maxWidth:v,maxHeight:v},className:"object-contain",width:v,height:v,src:p||"",alt:"".concat(u," icon"),fallbackSvg:h,fadeInOnLoad:!0}));case"syncSource":return y((0,o.jsx)(c.A9,{type:p,size:v}));case"icon":return y((0,o.jsx)(i.o,{style:{maxWidth:v,maxHeight:v},className:"object-contain",width:v,height:v,src:p||"",alt:"".concat(u," icon"),fallbackSvg:h,fadeInOnLoad:!0}));default:return y(h)}}},76426:(e,t,n)=>{n.d(t,{Ds:()=>i,Ic:()=>a,RK:()=>s});var o=n(68067),r=n(24407);let a=e=>"".concat(e,"-wrapped"),s=r.z.object({isConnected:r.z.boolean(),expiration:r.z.number()});function c(e,t){var n;if(!(null==(n=(0,o.Je)())?void 0:n.checkGate("claudeai_mcp_local_cache")))return;let r=Date.now(),a={};try{let e=localStorage.getItem("mcp-remote-connectors-state"),t=e?JSON.parse(e):{};if("object"==typeof t&&null!==t)for(let[e,n]of Object.entries(t)){let t=s.safeParse(n);t.success&&t.data.expiration>r&&(a[e]=t.data)}}catch(e){}try{a[e]={isConnected:t,expiration:r+864e5},localStorage.setItem("mcp-remote-connectors-state",JSON.stringify(a))}catch(e){}}let i=e=>({remoteServers:{},remoteConnectionStates:{},remoteClients:{},remoteTools:{},remotePrompts:{},remoteResources:{},remoteIsLoading:!1,addRemoteServer:t=>e(e=>({remoteServers:{...e.remoteServers,[t.uuid]:t},remoteConnectionStates:{...e.remoteConnectionStates,[t.uuid]:{isConnected:!1,isConnecting:!0,usedAuthentication:!1}}})),setRemoteServerConnected:(t,n)=>e(e=>(c(t,!0),{...e,remoteConnectionStates:{...e.remoteConnectionStates,[t]:{isConnected:!0,isConnecting:!1,usedAuthentication:n}}})),setRemoteClient:(t,n)=>e(e=>({remoteClients:{...e.remoteClients,[t]:n}})),disconnectRemoteServer:t=>e(e=>{let{[t]:n,[a(t)]:o,...r}=e.remoteClients;c(t,!1);let{[t]:s,...i}=e.remoteTools,{[t]:l,...u}=e.remotePrompts,{[t]:m,...d}=e.remoteResources;return{...e,remoteConnectionStates:{...e.remoteConnectionStates,[t]:{isConnected:!1,isConnecting:!1,usedAuthentication:!1}},remoteClients:r,remoteTools:i,remotePrompts:u,remoteResources:d}}),removeRemoteServer:t=>e(e=>{let{[t]:n,...o}=e.remoteServers,{[t]:r,...s}=e.remoteConnectionStates,{[t]:c,[a(t)]:i,...l}=e.remoteClients,{[t]:u,...m}=e.remoteTools,{[t]:d,...g}=e.remotePrompts,{[t]:p,...f}=e.remoteResources;return{...e,remoteServers:o,remoteConnectionStates:s,remoteClients:l,remoteTools:m,remotePrompts:g,remoteResources:f}}),setRemoteTools:(t,n)=>e(e=>({remoteTools:{...e.remoteTools,[t]:n}})),setRemotePrompts:(t,n)=>e(e=>({remotePrompts:{...e.remotePrompts,[t]:n}})),setRemoteResources:(t,n)=>e(e=>({remoteResources:{...e.remoteResources,[t]:n}})),setRemoteIsLoading:t=>e({remoteIsLoading:t})})},86284:(e,t,n)=>{n.d(t,{B:()=>a,C:()=>s});var o=n(54568);n(7620);var r=n(45271);let a=e=>{let{icon:t,name:n,path:a,size:c=60,className:i}=e,l=t?s(t,a):"";return(0,o.jsx)(r.z,{size:c,imageSize:.7*c,type:"external",src:l,name:n,className:i})};function s(e,t){if(!e)return"";if(e.startsWith("data:"))return e;if(e.startsWith("https://"))return e.replace("https://","".concat("claude-image","://"));if(e.includes("://")||!t)return"";let n=t.replace(/\\/g,"/"),o=e.replace(/\\/g,"/"),r="".concat(n,"/").concat(o);return"file://".concat(r)}},92693:(e,t,n)=>{function o(e){let t=e,n="",o=0;for(;t!==n&&o<10;)n=t,t=(t=(t=(t=t.normalize("NFKC")).replace(RegExp("[\\p{Cf}\\p{Co}\\p{Cn}]","gu"),"")).replace(RegExp("[\\p{Cc}]","gu"),e=>"\n"===e||"	"===e||"\r"===e?e:"")).replace(/[\u200B-\u200F]/g,"").replace(/[\u202A-\u202E]/g,"").replace(/[\u2066-\u2069]/g,"").replace(/[\uFEFF]/g,"").replace(/[\uE000-\uF8FF]/g,""),o++;if(o>=10)throw Error("Unicode sanitization reached maximum iterations (".concat(10,") for input: ").concat(e.slice(0,100)));return t}n.d(t,{M:()=>function e(t){if("string"==typeof t)return o(t);if(Array.isArray(t))return t.map(e);if(null!==t&&"object"==typeof t){let n={};for(let[o,r]of Object.entries(t))n[e(o)]=e(r);return n}return t},P:()=>o})},94295:(e,t,n)=>{n.d(t,{B5:()=>g,BL:()=>C,DK:()=>p,IX:()=>w,Ng:()=>_,Nv:()=>S,QP:()=>A,Z5:()=>y,a0:()=>f,gz:()=>P,jU:()=>R,kd:()=>k,mY:()=>h,nX:()=>L,vt:()=>d,yJ:()=>b,zt:()=>v});var o=n(74813),r=n(1613),a=n(44995),s=n(16178),c=n(96089),i=n(80688),l=n(66365),u=n(4869),m=n(27541);function d(e,t){return(0,r.Sk)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(t),{enabled:!!e&&(0,c.B9)(e),meta:{noToast:!0}})}let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)();return(0,r.L2)("/api/auth/send_magic_link","POST",{...e,onSuccess:(n,o,r)=>{n.sso_url?t({event_key:"login.email.sso_initiated"}):t({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(n,o,r)},onError:(n,o,r)=>{t({event_key:"login.email.magic_link_send_error",error:n.message,error_type:n instanceof s.LG?n.type:"unknown"}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.fZ)();return(0,r.L2)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),c=(0,a.Mk)(),{client:i}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(n,o,r)=>{"code"===o.credentials.method?t({event_key:"login.email.finished"}):t({event_key:"login.email.magic_link_success"}),T(i,n,t,"email","magic_link",c),e.onSuccess&&e.onSuccess(n,o,r)},onError:(n,o,r)=>{if("code"===o.credentials.method){let e="unknown";"already_used"===n.message?e="already_used":n instanceof s.LG&&"rate_limit_error"===n.type?e="rate_limit":n instanceof s.LG&&400===n.statusCode&&(e="incorrect_code"),t({event_key:"login.email.code_verification_error",error:n.message,error_type:e})}else t({event_key:"login.email.magic_link_verification_error",error:n.message});e.onError&&e.onError(n,o,r)},onMutate:e=>{"code"===e.credentials.method?t({event_key:"login.email.verifying_code"}):t({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),s=(0,a.Mk)(),c=(0,m.useRouter)(),{client:i}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_google","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),c.push(n.sso_url)):(t({event_key:"login.google.finished"}),T(i,n,t,"google","button",s),e.onSuccess&&e.onSuccess(n,o,r))},onError:(n,o,r)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),s=(0,a.Mk)(),c=(0,m.useRouter)(),{client:i}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),c.push(n.sso_url)):(t({event_key:"login.google.finished",flow_type:"one_tap"}),T(i,n,t,"google","onetap",s),e.onSuccess&&e.onSuccess(n,o,r))},onError:(n,o,r)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),s=(0,m.useRouter)();return(0,r.L2)("/api/auth/accept_invite","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),s.push(n.sso_url)):e.onSuccess&&e.onSuccess(n,o,r)},transformVariables:e=>({...e,source:n?"claude":"console"})})},_=()=>(0,r.L2)("/api/auth/logout","POST"),S=()=>(0,r.L2)("/api/auth/logout/all-sessions","POST"),C=()=>{let e=(0,u.useQueryClient)();return(0,r.L2)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[i.Rw]})}})},b=()=>(0,r.Qv)("/api/account/settings","PATCH",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:{...t.account.settings,...e}}}:t,{queryKey:[i.Rw]}),L=()=>{let e=(0,u.useQueryClient)();return(0,r.L2)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[i.Rw]})}})},R=()=>(0,r.L2)("/api/account/email_consent","PUT");function T(e,t,n,o,r,a){t.created&&n({event_key:"login.account.created",surface:a,authMethod:o,flow:r},t.account)}function k(e){return(0,r.Sk)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function w(e){return(0,r.Sk)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function P(e,t,n){return(0,r.Sk)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(t,"&source=").concat(n),{meta:{noToast:!0}})}function A(e,t){var n;let o=(0,u.useQueryClient)();return(0,r.L2)("/api/highside/login","GET",{...t,headers:{...null!=(n=t.headers)?n:{},...e},async onSuccess(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];await o.invalidateQueries({queryKey:[i.Rw]}),null==(e=t.onSuccess)||e.call(t,...r)}})}},96089:(e,t,n)=>{n.d(t,{B9:()=>r,Lj:()=>a});let o=/^[A-Za-z0-9._%+\u0027-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,r=e=>o.test(e),a=(e,t)=>{if(!t)return!1;let n=e.split("@")[1];return t.includes(n)}}}]);