"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3960],{22271:(e,t,n)=>{n.d(t,{P:()=>h});var r=n(54568),a=n(64328),i=n(84284),l=n(23812),o=n(87483),s=n(67453),u=n(68067),c=n(17560),d=n(785),p=n(72902),m=n(59666),g=n(50571),v=n(10665);function h(e){var t,n;let{tool:h,server:y,children:f}=e,{account:b}=(0,a.YL)(),_=null!=(n=null==b||null==(t=b.settings)?void 0:t.enabled_mcp_tools)?n:{},x=(0,v.vP)("enabled_mcp_tools")||{};(0,u.fS)("claude_ai_sticky_project_settings")&&(_=x);let{toggleMcpToolEnabled:w,toggleMcpToolAlwaysApproved:S}=(0,g.es)(),j=(0,g.yr)()(y,h),k=!j.approvalRequired,A=j.managedByOrg,N=j.managedByServer,C=h.enabledKey,R=(e,t,n)=>(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[t,(0,r.jsx)("p",{className:"text-sm text-text-400",children:n})]}),(0,r.jsx)(c.J,{size:16,className:(0,p.A)("shrink-0",e?"opacity-1":"opacity-0")})]}),O=(0,r.jsx)(l.$,{variant:"outline",disabled:!1===_[C]||A||N,append:(0,r.jsx)(d.a,{size:16}),className:"!min-w-[200px] flex justify-between items-center",children:k?(0,r.jsx)(m.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}):(0,r.jsx)(m.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"})});return(0,r.jsxs)("div",{className:"flex flex-row gap-4 flex-shrink-0",children:[(0,r.jsx)("label",{children:(0,r.jsx)(i.j,{checked:!1!==_[C],onChange:e=>w(C,e.target.checked,y.url)})}),(0,r.jsx)("div",{className:"flex flex-grow",children:f}),(0,r.jsxs)(o.ms,{unstyledTrigger:!0,align:"start",trigger:N?(0,r.jsx)(s.Tooltip,{side:"top",tooltipContent:(0,r.jsx)(m.A,{defaultMessage:"Permissions are controlled by {serverName}",id:"IbOJlxOOYO",values:{serverName:y.name}}),children:(0,r.jsx)("div",{children:O})}):A?(0,r.jsx)(s.Tooltip,{side:"top",tooltipContent:(0,r.jsx)(m.A,{defaultMessage:"Setting managed by your organization",id:"dmrV8MS1en"}),children:(0,r.jsx)("div",{children:O})}):O,children:[(0,r.jsx)(o.tJ,{onClick:()=>{S(h.alwaysApprovedKey,!1)},disabled:N,children:R(!k,(0,r.jsx)(m.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"}),(0,r.jsx)(m.A,{defaultMessage:"Your approval is required every time",id:"Ne5BQmk7c1"}))}),(0,r.jsx)(o.tJ,{onClick:()=>{S(h.alwaysApprovedKey,!0)},disabled:N,children:R(k,(0,r.jsx)(m.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}),(0,r.jsx)(m.A,{defaultMessage:"Your approval is not required",id:"9AbpSd6OJA"}))})]})]})}},44007:(e,t,n)=>{n.d(t,{u3:()=>v,oQ:()=>y,p9:()=>h});var r=n(64328),a=n(92693),i=n(68067),l=n(56929),o=n(57965),s=n.n(o),u=n(7620);function c(e){var t,n,r,a,i,l,o,s;return{name:e.name,description:null!=(t=e.description)?t:void 0,annotations:e.annotations?{title:null!=(n=e.annotations.title)?n:void 0,readOnlyHint:null!=(r=e.annotations.readOnlyHint)?r:void 0,destructiveHint:null!=(a=e.annotations.destructiveHint)?a:void 0,idempotentHint:null!=(i=e.annotations.idempotentHint)?i:void 0,openWorldHint:null!=(l=e.annotations.openWorldHint)?l:void 0}:void 0,inputSchema:{...e.inputSchema,properties:null!=(o=e.inputSchema.properties)?o:void 0,required:null!=(s=e.inputSchema.required)?s:void 0},displayName:e.displayName,enabledKey:e.enabled_key,alwaysApprovedKey:e.always_approved_key}}function d(e){var t,n,r,a;return{name:e.name,description:null!=(n=e.description)?n:void 0,title:null!=(r=e.title)?r:void 0,arguments:null==(t=e.arguments)?void 0:t.map(e=>{var t,n;return{name:e.name,description:null!=(t=e.description)?t:void 0,required:null!=(n=e.required)?n:void 0}}),_meta:null!=(a=e._meta)?a:void 0,displayName:e.displayName}}function p(e){var t,n,r,a,i,l;return{uri:e.uri,name:e.name,description:null!=(t=e.description)?t:void 0,title:null!=(n=e.title)?n:void 0,mimeType:null!=(r=e.mimeType)?r:void 0,size:null!=(a=e.size)?a:void 0,annotations:null!=(i=e.annotations)?i:void 0,_meta:null!=(l=e._meta)?l:void 0,displayName:e.displayName}}var m=n(35580),g=n(97859);function v(e,t){m.eZ.getState().setRemoteIsLoading(!0),g.O.getState().clearServersNeedingWebsocketRetry();let n=[],r=()=>{if(0!==n.length){for(let i of n){var e,r;let n={uuid:i.uuid,name:i.name,url:i.url,custom_oauth_client_id:i.custom_oauth_client_id,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:null!=(e=i.usedAuthentication)&&e};i.connected&&(0,m.nd)(i.uuid)&&(0,m.s$)(i.uuid)&&(0,m.rD)(n);let l=m.eZ.getState(),o=i.tools||[],s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(c)}(t?(0,a.M)(o):o),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(d)}(i.prompts),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(p)}(i.resources);l.setRemoteTools(i.uuid,s),l.setRemotePrompts(i.uuid,u),l.setRemoteResources(i.uuid,v),i.connected?(0,m.n3)(i.uuid,null!=(r=i.usedAuthentication)&&r):(g.O.getState().addServerNeedingWebsocketRetry(n),l.removeRemoteServer(i.uuid))}n.length=0}},i=s()(r,300,{leading:!0,trailing:!0}),o=new EventSource("/api/organizations/".concat(e,"/mcp/v2/bootstrap"),{withCredentials:!0});o.onerror=()=>{i.cancel(),r(),o.close(),m.eZ.getState().setRemoteIsLoading(!1),g.O.getState().clearServersNeedingWebsocketRetry(),(0,l.Cp)(Error("MCP bootstrap stream error"),{tags:{action:"mcp_bootstrap_stream_error"},extra:{orgUuid:e}})},o.addEventListener("server_list",t=>{try{let{servers:e}=JSON.parse(t.data);for(let t of(m.eZ.getState().setRemoteIsLoading(!1),e))if((0,m.nd)(t.uuid)){let e={uuid:t.uuid,name:t.name,url:t.url,custom_oauth_client_id:null,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:!1};(0,m.rD)(e)}}catch(n){(0,l.Cp)(n,{tags:{action:"mcp_bootstrap_stream_server_list_parse"},extra:{orgUuid:e,eventData:t.data}})}}),o.addEventListener("server_data",t=>{try{let e=JSON.parse(t.data);n.push(e),i()}catch(n){(0,l.Cp)(n,{tags:{action:"mcp_bootstrap_stream_parse"},extra:{orgUuid:e,eventData:t.data}})}}),o.addEventListener("completed",()=>{i.cancel(),r(),o.close(),m.eZ.getState().setRemoteIsLoading(!1)})}let h=()=>(0,i.fS)("mcp_tb_sessions");function y(){let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,i.fS)("claude_ai_unicode_sanitize_mcp_data"),a=h();(0,u.useEffect)(()=>{if(a&&t)return v(t,n)},[a,t,n])}},49629:(e,t,n)=>{n.d(t,{J:()=>a});var r=n(16178);function a(e){let t="Unable to add Google Doc.";return e instanceof r.LG&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},50571:(e,t,n)=>{n.d(t,{$V:()=>w,vx:()=>_,yr:()=>j,iy:()=>O,kX:()=>x,sb:()=>b,v_:()=>C,Ax:()=>R,M8:()=>A,ko:()=>S,AY:()=>k,es:()=>N}),n(42759);var r=n(94295),a=n(74813),i=n(1613),l=n(64328),o=n(28),s=n(68067),u=n(28044),c=n(7620),d=n(44007),p=n(96547),m=n(98649),g=n(90370),v=n(88775),h=n(66365),y=n(35580),f=n(10665);let b=()=>(0,s.fS)("bagel_enabled"),_=()=>{let{account:e,activeOrganization:t}=(0,l.YL)(),n=(0,l.mV)(),r=(0,o.pG)(e,t,"claude-ai"),a=(0,o.yI)(e,t,o.Nt.IntegrationsManage);return!n||r||a},x=()=>{let e=(0,l.zm)(),t=_();return e&&!t},w="mcp_directory_chin",S=function(){var e,t;let{shouldTrack:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,c.useRef)(!1),a=b(),{dismiss:i}=(0,m.W)(),{account:o}=(0,l.YL)(),s=x(),u=new Date,d="".concat(u.getDate(),"-").concat(u.getMonth(),"-").concat(u.getFullYear()),p="".concat(w,"_").concat(d),g=(null!=(t=null==o||null==(e=o.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(w)),v=(0,c.useMemo)(()=>!(!a||s||g.includes(w))&&(!(g.length>3)||!g.includes(p)),[s,a,g,p]);return(0,c.useEffect)(()=>{!r.current&&v&&!g.includes(p)&&n&&(i(p),r.current=!0)},[p,g,n,i,v]),v};function j(e){var t;let n=(0,s.fS)("disable_destructive_mcp_tools_by_default"),{getMcpToolApprovalConfigSetting:r}=function(e){let{value:t}=(0,h.useDynamicConfig)("tanuki"===e?"tanuki_mcp_tool_approval_config":"mcp_tool_approval_config"),n=(0,c.useCallback)((e,n)=>{var r,a;if(!t||!e)return;let i=[e.url,e.uuid,e.name].map(e=>{var r,a;if(e)return(null==(r=t[e])?void 0:r[null!=n?n:"*"])||(null==(a=t[e])?void 0:a["*"])||void 0}).find(e=>void 0!==e);return void 0!==i?i:n&&(null==(r=t["*"])?void 0:r[n])!==void 0?t["*"][n]:(null==(a=t["*"])?void 0:a["*"])!==void 0?t["*"]["*"]:void 0},[t]);return{toolApprovalConfig:t,getMcpToolApprovalConfigSetting:n}}(e),{account:a}=(0,l.YL)(),i=null==a||null==(t=a.settings)?void 0:t.enabled_mcp_tools;return(0,c.useCallback)((e,t)=>{var a,l;let o=r(e,null==t?void 0:t.name),s=(null==t?void 0:t.alwaysApprovedKey)?null==i?void 0:i[null==t?void 0:t.alwaysApprovedKey]:void 0;return n&&(null==t||null==(a=t.annotations)?void 0:a.destructiveHint)===!0?{approvalRequired:!0,showAlwaysAllowed:!1}:"always"===o?{approvalRequired:!0,showAlwaysAllowed:!1,managedByOrg:!0}:s?{approvalRequired:!1}:"server"===o?{approvalRequired:!1,managedByServer:!0}:"never"===o&&!1!==s||"readOnly"===o&&(null==t||null==(l=t.annotations)?void 0:l.readOnlyHint)===!0&&!1!==s?{approvalRequired:!1}:{approvalRequired:!0,showAlwaysAllowed:!0,managedByOrg:!1,managedByServer:!1}},[n,r,i])}let k=()=>{let e=(0,y.Uz)({type:"local"});return!!(0,u.V)()&&e.length>0},A=()=>{var e,t,n;let r=(0,g.oM)(),a=(null==(e=r.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(n=r.conversation)||null==(t=n.conversationSettings)?void 0:t.compass_mode)==="advanced",i=(0,y.Uz)({type:"remote"}).length>0;return a&&i},N=e=>{let t=(0,v.jw)(),{account:n}=(0,l.YL)(),{updateSettings:i}=(0,f.IS)(),{track:o}=(0,a.st)(),{mutate:s}=(0,r.yJ)();return{toggleMcpToolEnabled:(r,a,l)=>{n&&(i({mcpToolsUpdate:Array.isArray(r)?r.reduce((e,t)=>({...e,[t]:a}),{}):{[r]:a}}),o({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==t?void 0:t.id)||null,setting:r,value:a,url:l,source:null==e?void 0:e.source}))},toggleMcpToolAlwaysApproved:(e,t)=>{n&&s({enabled_mcp_tools:{...n.settings.enabled_mcp_tools,[e]:t}})}}},C=e=>{let{activeOrganization:t}=(0,l.YL)(),n=null==t?void 0:t.uuid,{data:r}=(0,p.XT)(n,e||"",{enabled:!!e&&!!n});return!!r},R=()=>{let e=(0,d.p9)(),{activeOrganization:t}=(0,l.YL)(),n=null==t?void 0:t.uuid;return(0,i.L2)("/api/organizations/".concat(n,"/mcp/resources"),"POST",{enabled:e&&!!n})};function O(e){let t=j(e);return(e,n)=>t(y.eZ.getState().remoteServers[e],{name:n,alwaysApprovedKey:"",displayName:"",enabledKey:"",inputSchema:{type:"object"}})}},68010:(e,t,n)=>{n.d(t,{M:()=>u});var r=n(54568),a=n(23812),i=n(43178),l=n(72902),o=n(7620),s=n(59666);function u(e){let{text:t,className:n}=e,[u,c]=(0,o.useState)(!1),d=(0,o.useRef)(null),p=(0,o.useRef)(0),[m,g]=(0,o.useState)(42),v=m>42;return((0,o.useLayoutEffect)(()=>{var e;g((null==(e=d.current)?void 0:e.scrollHeight)||0)},[t]),t)?(0,r.jsxs)("div",{className:(0,l.A)("overflow-hidden relative transition-[height] duration-150 ease-in-out","text-text-300 text-sm",n),style:{height:u?m+32*!!v:40},children:[(0,r.jsx)("div",{ref:d,className:"whitespace-pre-wrap",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:t}),v&&(0,r.jsx)("div",{className:"absolute bottom-0 right-0 bg-bg-100 bottom-0",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-0 bottom-0 -left-4 w-6 bg-gradient-to-r from-transparent to-bg-100"}),(0,r.jsx)(a.$,{size:"inline",variant:"ghost",onClick:()=>{var e;let t=null==(e=d.current)?void 0:e.closest(".overflow-y-auto");!u&&t?p.current=t.scrollTop:u&&t&&t.scrollTo({top:p.current,behavior:"instant"}),c(e=>!e)},className:"font-medium flex gap-1 items-center",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:12,weight:"bold"}),(0,r.jsx)(s.A,{defaultMessage:"Less",id:"mFYgAXM/x4"})]}):(0,r.jsx)(s.A,{defaultMessage:"{ellipsis}More",id:"eRW5dl5m34",values:{ellipsis:"..."}})})]})})]}):null}},84284:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(54568),a=n(72902);function i(e){let{className:t,variant:n,width:i=36,height:o=20,children:s,disableAnimation:u,...c}=e,d="number"==typeof o?"".concat(o,"px"):o,p="number"==typeof i?"".concat(i,"px"):i,m="calc(".concat(d," - 4px)"),g="calc(".concat(p," - ").concat(d,")");return(0,r.jsxs)("div",{className:(0,a.A)("group/switch relative select-none cursor-pointer",t),children:[(0,r.jsx)("input",{type:"checkbox",style:{width:i,height:d},className:"peer sr-only",role:"switch",...c}),(0,r.jsx)("div",{style:{width:i,height:d},className:(0,a.A)("border-border-300 rounded-full peer:can-focus peer-disabled:opacity-50",u&&"!transition-none",l.pill[n||"default"])}),(0,r.jsx)("div",{style:{height:m,width:m,transform:"translateX(".concat(c.checked?g:"0",")")},className:(0,a.A)("absolute flex items-center justify-center start-[2px] top-[2px] rounded-full transition-all",u&&"!transition-none",l.circle[n||"default"]),children:s})]})}let l={pill:{default:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-accent-secondary-100\n    ",blackAndWhite:"\n    bg-bg-500  \n    ",dark:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-text-100\n    dark:bg-border-200\n    dark:peer-checked:bg-text-500\n    "},circle:{default:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    ",blackAndWhite:"\n    group-hover/switch:opacity-80\n    bg-bg-000\n    transition\n    duration-200\n    ",dark:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    "}}},87483:(e,t,n)=>{n.d(t,{AM:()=>_,Bi:()=>w,DG:()=>T,FV:()=>L,MS:()=>A,RP:()=>k,Wn:()=>M,cm:()=>N,ms:()=>b,o_:()=>C,q:()=>z,tJ:()=>O});var r=n(2348),a=n(54568),i=n(59922),l=n(62515),o=n(72902),s=n(94882),u=n(7620);function c(){let e=(0,r._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return c=function(){return e},e}function d(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1.5\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  max-h-[min(var(--radix-dropdown-menu-content-available-height),var(--dropdown-max-height))]\n  overflow-y-auto\n"]);return d=function(){return e},e}function p(){let e=(0,r._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n"]);return p=function(){return e},e}function m(){let e=(0,r._)(["text-text-500 pt-1 px-2"]);return m=function(){return e},e}function g(){let e=(0,r._)(["\n  font-base  \n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-000\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){let e=(0,r._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return v=function(){return e},e}function h(){let e=(0,r._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n"]);return h=function(){return e},e}function y(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  overflow-y-auto\n  max-h-[min(100vh,var(--dropdown-max-height))]\n"]);return y=function(){return e},e}function f(){let e=(0,r._)(["\n  h-0\n  border-t-0.5\n  border-border-300\n  m-1\n"]);return f=function(){return e},e}function b(e){let{trigger:t,children:n,unstyledTrigger:r=!1,...i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x,{...i,trigger:r?(0,a.jsx)(s.l9,{asChild:!0,children:t}):(0,a.jsx)(j,{asChild:!0,children:t}),children:n})})}function _(e){let{children:t,open:n,mainButtonText:r,onClickMainButton:i,align:u="end",...c}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x,{...c,align:u,trigger:(0,a.jsxs)("div",{className:"flex h-8 whitespace-nowrap",children:[(0,a.jsx)("button",{className:(0,o.A)("font-base-bold !text-xs rounded-l-lg bg-bg-000 h-full flex items-center justify-center px-2 border-y border-l border-border-300 hover:bg-bg-200",n&&"bg-bg-200"),onClick:i,children:r}),(0,a.jsx)(s.l9,{asChild:!0,children:(0,a.jsx)("button",{className:"bg-bg-000 flex items-center justify-center px-1 hover:bg-bg-200 rounded-r-lg border border-border-300",children:(0,a.jsx)(l.biH,{size:16})})})]}),children:t})})}function x(e){var t;let{matchTriggerWidth:n=!1,children:r,open:i,onOpenChange:l,trigger:o,modal:u,...c}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(s.bL,{open:i,onOpenChange:l,modal:u,children:[o,(0,a.jsx)(s.ZL,{children:(0,a.jsx)(S,{style:n?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!=(t=c.sideOffset)?t:4,...c,children:r})})]})})}let w=(0,i.J)(s.lp)(c()),S=(0,i.J)(s.UC)(d()),j=(0,i.J)(s.l9)(p()),k=s.I,A=s.Pb,N=s.ZL,C=(0,i.J)(s.lp)(m()),R=(0,i.J)(s.q7)(g(),e=>{let{disabled:t}=e;return t&&"\n    opacity-50\n    pointer-events-none\n  "},e=>{let{danger:t}=e;return t&&"\n    !text-danger-000\n    [&[data-highlighted]]:bg-danger-900\n  "}),O=u.forwardRef((e,t)=>{let{children:n,icon:r,trailing:i,...l}=e;return r||i?(0,a.jsx)(R,{ref:t,...l,children:(0,a.jsxs)("div",{className:"flex items-center gap-2.5 w-full py-0.5 text-sm group",children:[r,(0,a.jsx)("span",{className:"flex-1 truncate",children:n}),i&&(0,a.jsx)("div",{className:"flex items-center flex-shrink-0 -mr-2",children:i})]})}):(0,a.jsx)(R,{ref:t,...l,children:n})});O.displayName="DropdownItem";let z=i.J.div(v()),M=(0,i.J)(s.ZP)(h()),L=(0,i.J)(s.G5)(y()),T=(0,i.J)(s.mB)(f())},96547:(e,t,n)=>{n.d(t,{vW:()=>z,R4:()=>O,qb:()=>A,ll:()=>N,XT:()=>k,eB:()=>j,W3:()=>C,lu:()=>S,p4:()=>R});var r=n(74813),a=n(1613),i=n(64328),l=n(35984),o=n(80688),s=n(68067),u=n(2e3),c=n(4869),d=n(7620),p=n(24407),m=n(44007),g=n(90370),v=n(88775),h=n(44894),y=n(35580);function f(e){let t=window.atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return n}var b=n(49629);let _=p.Ay.object({uuid:p.Ay.string().uuid(),name:p.Ay.string(),url:p.Ay.string(),created_at:p.Ay.string().datetime(),updated_at:p.Ay.string().datetime(),custom_oauth_client_id:p.Ay.string().nullable().optional(),custom_oauth_client_secret:p.Ay.string().nullable().optional(),is_authenticated:p.Ay.boolean().default(!1)});var x=n(86141),w=n(22167);let S=()=>(0,s.fS)("papi_mcp");function j(e,t){let n=S(),r=(0,m.p9)();return(0,a.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[o.lA,e],enabled:!r&&n&&!!e,...t,select:e=>p.z.array(_).parse(e)})}function k(e,t,n){return(0,a.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),{queryKey:[o.Sm,e,t],enabled:!!e&&!!t,...n,select:e=>_.parse(e)})}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{track:i}=(0,r.st)(),l=(0,c.useQueryClient)(),u=(0,m.p9)(),d=(0,s.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(r,a,s)=>{var c;u&&((0,y.rD)(r),(0,m.u3)(e,d)),l.invalidateQueries({queryKey:[o.lA,e]}),l.invalidateQueries({queryKey:[o.qE,e]}),null==(c=t.onSuccess)||c.call(t,r,a,s),i({event_key:"claudeai.mcp.create_server",source:n.source,url:r.url,type:"remote"})}})}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,c.useQueryClient)(),i=(0,m.p9)(),l=(0,s.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSuccess:(a,s,u)=>{var c;(0,y.eg)(t),i?(0,m.u3)(e,l):(r.setQueryData([o.lA,e],e=>{var n;return null!=(n=null==e?void 0:e.filter(e=>e.uuid!==t))?n:[]}),r.invalidateQueries({queryKey:[o.lA,e]})),r.invalidateQueries({queryKey:[o.qE,e]}),null==(c=n.onSuccess)||c.call(n,a,s,u)}})}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,c.useQueryClient)(),i=(0,m.p9)(),l=(0,s.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,a.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...n,onSettled:()=>{(0,y.Ug)(t)},onSuccess:(t,a,s)=>{var u;i?(0,m.u3)(e,l):r.invalidateQueries({queryKey:[o.lA,e]}),r.invalidateQueries({queryKey:[o.qE,e]}),null==(u=n.onSuccess)||u.call(n,t,a,s)}})}function R(e){let t=(0,m.p9)(),{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!r&&t})}function O(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/mcp/attach_resource"),"POST",{enabled:t&&!!r,...e})}(),t=M(),n=function(){let{setIsUploadingDriveSync:e}=(0,g.oM)(),{setSyncSourceUuids:t}=(0,v.Jy)(e=>({setSyncSourceUuids:e.setSyncSourceUuids})),n=(0,w.kO)(),r=(0,y.Uz)({type:"remote",url:"https://api.anthropic.com/mcp/gdrive/sse"}),{addError:a}=(0,l.Y)(),i=r.length>0?r[0]:null,{mutate:o}=(0,x.EF)({onMutate:()=>{e(!0)},onSuccess:n=>{t(e=>[...e,n.uuid]),e(!1)},onError:t=>{e(!1),a((0,b.J)(t),{error:t})},meta:{noToast:!0}});return(0,d.useCallback)(e=>{n&&i&&o({sync_source_type:u.v8.MCP_RESOURCES,sync_source_config:{server_uuid:i.uuid,resource:{...e}}})},[o,n,i])}(),{addError:o}=(0,l.Y)(),s=(0,m.p9)(),c=function(){let{addError:e}=(0,l.Y)(),{track:t}=(0,r.st)(),{handleUpload:n}=(0,g.oM)();return(0,d.useCallback)(async(r,a)=>{try{let e=(await (0,y.KU)(r).readResource({uri:a.uri},{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=f(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],a.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,n])}(),{setIsUploadingDriveSync:p}=(0,g.oM)();return(0,d.useCallback)(async r=>{let{serverUuid:a,resource:i,onClose:l}=r;if(!s||(0,y.HG)(a,s))return c(a,i);{let r;try{let e=(0,y.KU)(a);r=await e.readResource({uri:i.uri},{timeout:15e3})}catch(e){}try{var u;p(!0);let o=await e({resource:i,server_uuid:a,result:r});(null==(u=i.mimeType)?void 0:u.startsWith("application/vnd.google-apps"))?n(i):t(o),p(!1),null==l||l()}catch(e){p(!1),o("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:a}}})}}},[s,c,p,e,n,t,o])}function z(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/mcp/attach_prompt"),"POST",{enabled:t&&!!r,...e})}(),n=M(),{addError:o}=(0,l.Y)(),s=(0,m.p9)(),u=function(e){let{track:t}=(0,r.st)(),{addError:n}=(0,l.Y)(),{handleUpload:a}=(0,g.oM)();return(0,d.useCallback)(async(r,i,l)=>{try{let n=await (0,y.KU)(r).getPrompt({name:i.name,arguments:l},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(l).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let n=e=>{let t=h._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},r=e=>"".concat(i.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],r("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([f(e.content.data)],r(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var a;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(a=t.mimeType)?a:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let r=n(t.mimeType);return new File([f(t.blob)],"".concat(t.uri,".").concat(r),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===n.messages.length)await a([o(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(i.name,"_messages.json"),{type:"application/json"}))}await a(e)}null==e||e()}catch(e){n("Failed to get prompt. You can try again.",{error:e})}},[t,n,a,e])}(e);return(0,d.useCallback)(async r=>{let{serverUuid:a,prompt:i,args:l}=r;if(!s||(0,y.HG)(a,s))return u(a,i,l);{let r;try{let e=(0,y.KU)(a);r=await e.getPrompt({name:i.name,arguments:l},{timeout:15e3})}catch(e){}try{let o=await t({prompt:i,arguments:l,server_uuid:a,result:r});n(o),null==e||e()}catch(e){o("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:a}}})}}},[t,n,o,e,s,u])}function M(){let{setAttachments:e,setFiles:t}=(0,v.Jy)(e=>({setAttachments:e.setAttachments,setFiles:e.setFiles}));return(0,d.useCallback)(n=>{let{files:r,attachments:a}=n;r&&r.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...r.filter(e=>!t.has(e.file_uuid))]}),a&&a.length>0&&e(e=>Array.from(new Set([...e,...a].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}p.z.object({name:p.z.string(),url:p.z.string(),custom_oauth_client_id:p.z.string().nullable().optional(),custom_oauth_client_secret:p.z.string().nullable().optional()}),p.z.object({name:p.z.string().optional().nullable(),url:p.z.string().optional().nullable()})},97859:(e,t,n)=>{n.d(t,{O:()=>r});let r=(0,n(4211).v)(e=>({serversNeedingWebsocketRetry:[],addServerNeedingWebsocketRetry:t=>e(e=>({serversNeedingWebsocketRetry:[...e.serversNeedingWebsocketRetry,t]})),clearServersNeedingWebsocketRetry:()=>e({serversNeedingWebsocketRetry:[]})}))},98649:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(94295),a=n(64328),i=n(7620);function l(){let{mutate:e,isPending:t}=(0,r.yJ)(),{account:n}=(0,a.YL)();return{dismiss:(0,i.useCallback)(t=>{var r,a,i;n&&(null!=n&&null!=(a=n.settings)&&null!=(r=a.dismissed_claudeai_banners)&&r.some(e=>e.banner_id===t)||e({dismissed_claudeai_banners:[...(null==n||null==(i=n.settings)?void 0:i.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[n,e]),isDismissed:(0,i.useCallback)(e=>{var t,r;return(null==n||null==(r=n.settings)||null==(t=r.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}}}]);